# راهنمای استقرار تولید - سیستم آپلود فایل

## لیست بررسی قبل از استقرار

### ۱. تنظیمات امنیتی

- [x] حذف کردن اطلاعات حساس از کد
- [x] تنظیم رمزهای عبور قوی در `.env.production`
- [x] تغییر `ENCRYPTION_KEY` در فایل محیط
- [x] تنظیم HTTPS برای سرور (middleware)
- [x] محدود کردن نوع فایل‌های قابل آپلود
- [x] تنظیم حداکثر اندازه فایل

### ۲. تنظیمات محیط تولید

- [x] ایجاد فایل `.env.production` با اطلاعات صحیح
- [x] تنظیم متغیرهای محیط سرور:
  - `ADMIN_USERNAME_1` و `ADMIN_PASSWORD_1`
  - `ADMIN_USERNAME_2` و `ADMIN_PASSWORD_2`
  - `ENCRYPTION_KEY` (کلید قوی و منحصر به فرد)
  - `NEXT_PUBLIC_API_URL` (آدرس دامنه تولید)
- [x] پیکربندی آدرس‌های سرور
- [x] تنظیم مسیر ذخیره فایل‌ها (`UPLOAD_PATH`, `BACKUP_PATH`)

### ۳. بهینه‌سازی عملکرد

- [x] حذف داده‌های آزمایشی (Mock Data)
- [x] حذف کدهای غیرضروری توسعه
- [x] حذف console.log های غیرضروری
- [ ] فشرده‌سازی فایل‌ها (Gzip)
- [ ] بهینه‌سازی تصاویر
- [ ] تنظیم Cache Headers

### ۴. سیستم بک‌آپ

- [x] تنظیم بک‌آپ خودکار فایل‌ها
- [x] بک‌آپ تنظیمات برنامه
- [x] سیستم بازیابی در صورت خرابی

### ۵. تنظیمات سرور

- [x] فایل تنظیمات nginx
- [x] فایل سرویس systemd
- [x] اسکریپت‌های استقرار
- [x] اسکریپت بک‌آپ سیستم

## دستورات استقرار

### ساخت نسخه تولید:

```bash
npm run build
```

### اجرا روی سرور:

```bash
npm start
```

## مسیرهای مهم

- **Admin Panel**: `/admin`
- **User Dashboard**: `/dashboard`
- **Upload Page**: `/upload`

## اطلاعات احراز هویت ادمین

1. **Admin اصلی**:

   - نام کاربری: `admin`
   - رمز عبور: `admin123`

2. **Admin قواعد**:
   - نام کاربری: `qavaedadmin`
   - رمز عبور: `Qavaed@1385`

## نکات امنیتی مهم

⚠️ **هشدار**: در محیط تولید حتماً:

1. رمزهای عبور قوی‌تر استفاده کنید
2. اتصال HTTPS فعال کنید
3. فایروال مناسب تنظیم کنید
4. به‌روزرسانی‌های امنیتی را دنبال کنید

## سیستم نظارت

- بررسی روزانه سلامت سیستم
- کنترل مصرف فضای ذخیره‌سازی
- نظارت بر ترافیک آپلود فایل
